(self.webpackChunkearth=self.webpackChunkearth||[]).push([[111],{9173:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EthereumProviderError=t.EthereumRpcError=void 0;const n=r(4445);class i extends Error{constructor(e,t,r){if(!Number.isInteger(e))throw new Error('"code" must be an integer.');if(!t||"string"!=typeof t)throw new Error('"message" must be a nonempty string.');super(t),this.code=e,void 0!==r&&(this.data=r)}serialize(){const e={code:this.code,message:this.message};return void 0!==this.data&&(e.data=this.data),this.stack&&(e.stack=this.stack),e}toString(){return n.default(this.serialize(),s,2)}}function s(e,t){if("[Circular]"!==t)return t}t.EthereumRpcError=i,t.EthereumProviderError=class extends i{constructor(e,t,r){if(!function(e){return Number.isInteger(e)&&e>=1e3&&e<=4999}(e))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(e,t,r)}}},43577:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.errorValues=t.errorCodes=void 0,t.errorCodes={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901}},t.errorValues={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}}},58011:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ethErrors=void 0;const n=r(9173),i=r(7264),s=r(43577);function o(e,t){const[r,s]=c(t);return new n.EthereumRpcError(e,r||i.getMessageFromCode(e),s)}function a(e,t){const[r,s]=c(t);return new n.EthereumProviderError(e,r||i.getMessageFromCode(e),s)}function c(e){if(e){if("string"==typeof e)return[e];if("object"==typeof e&&!Array.isArray(e)){const{message:t,data:r}=e;if(t&&"string"!=typeof t)throw new Error("Must specify string message.");return[t||void 0,r]}}return[]}t.ethErrors={rpc:{parse:e=>o(s.errorCodes.rpc.parse,e),invalidRequest:e=>o(s.errorCodes.rpc.invalidRequest,e),invalidParams:e=>o(s.errorCodes.rpc.invalidParams,e),methodNotFound:e=>o(s.errorCodes.rpc.methodNotFound,e),internal:e=>o(s.errorCodes.rpc.internal,e),server:e=>{if(!e||"object"!=typeof e||Array.isArray(e))throw new Error("Ethereum RPC Server errors must provide single object argument.");const{code:t}=e;if(!Number.isInteger(t)||t>-32005||t<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return o(t,e)},invalidInput:e=>o(s.errorCodes.rpc.invalidInput,e),resourceNotFound:e=>o(s.errorCodes.rpc.resourceNotFound,e),resourceUnavailable:e=>o(s.errorCodes.rpc.resourceUnavailable,e),transactionRejected:e=>o(s.errorCodes.rpc.transactionRejected,e),methodNotSupported:e=>o(s.errorCodes.rpc.methodNotSupported,e),limitExceeded:e=>o(s.errorCodes.rpc.limitExceeded,e)},provider:{userRejectedRequest:e=>a(s.errorCodes.provider.userRejectedRequest,e),unauthorized:e=>a(s.errorCodes.provider.unauthorized,e),unsupportedMethod:e=>a(s.errorCodes.provider.unsupportedMethod,e),disconnected:e=>a(s.errorCodes.provider.disconnected,e),chainDisconnected:e=>a(s.errorCodes.provider.chainDisconnected,e),custom:e=>{if(!e||"object"!=typeof e||Array.isArray(e))throw new Error("Ethereum Provider custom errors must provide single object argument.");const{code:t,message:r,data:i}=e;if(!r||"string"!=typeof r)throw new Error('"message" must be a nonempty string');return new n.EthereumProviderError(t,r,i)}}}},84101:(e,t,r)=>{"use strict";t.Cg=t.Sy=void 0;const n=r(9173);Object.defineProperty(t,"Cg",{enumerable:!0,get:function(){return n.EthereumRpcError}});r(7264);const i=r(58011);Object.defineProperty(t,"Sy",{enumerable:!0,get:function(){return i.ethErrors}});r(43577)},7264:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serializeError=t.isValidCode=t.getMessageFromCode=t.JSON_RPC_SERVER_ERROR_MESSAGE=void 0;const n=r(43577),i=r(9173),s=n.errorCodes.rpc.internal,o={code:s,message:a(s)};function a(e,r="Unspecified error message. This is a bug, please report it."){if(Number.isInteger(e)){const r=e.toString();if(u(n.errorValues,r))return n.errorValues[r].message;if(d(e))return t.JSON_RPC_SERVER_ERROR_MESSAGE}return r}function c(e){if(!Number.isInteger(e))return!1;const t=e.toString();return!!n.errorValues[t]||!!d(e)}function d(e){return e>=-32099&&e<=-32e3}function l(e){return e&&"object"==typeof e&&!Array.isArray(e)?Object.assign({},e):e}function u(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.JSON_RPC_SERVER_ERROR_MESSAGE="Unspecified server error.",t.getMessageFromCode=a,t.isValidCode=c,t.serializeError=function(e,{fallbackError:t=o,shouldIncludeStack:r=!1}={}){var n,s;if(!t||!Number.isInteger(t.code)||"string"!=typeof t.message)throw new Error("Must provide fallback error with integer number code and string message.");if(e instanceof i.EthereumRpcError)return e.serialize();const d={};if(e&&"object"==typeof e&&!Array.isArray(e)&&u(e,"code")&&c(e.code)){const t=e;d.code=t.code,t.message&&"string"==typeof t.message?(d.message=t.message,u(t,"data")&&(d.data=t.data)):(d.message=a(d.code),d.data={originalError:l(e)})}else{d.code=t.code;const r=null===(n=e)||void 0===n?void 0:n.message;d.message=r&&"string"==typeof r?r:t.message,d.data={originalError:l(e)}}const h=null===(s=e)||void 0===s?void 0:s.stack;return r&&e&&h&&"string"==typeof h&&(d.stack=h),d}},1482:(e,t,r)=>{"use strict";r.d(t,{v:()=>f});var n=r(15861),i=r(15671),s=r(43144),o=r(97326),a=r(79340),c=r(82963),d=r(61120),l=r(4942),u=r(64687),h=r.n(u),p=r(8654),m=r(37202),g=r.n(m);var f=function(e){(0,a.Z)(w,e);var t,r,u,m,f=(u=w,m=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,d.Z)(u);if(m){var r=(0,d.Z)(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return(0,c.Z)(this,e)});function w(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.Z)(this,w),e=f.call(this),(0,l.Z)((0,o.Z)(e),"clientId",void 0),e.clientId=t.clientId,e}return(0,s.Z)(w,[{key:"authenticateUser",value:(r=(0,n.Z)(h().mark((function e(){var t,r,n,i,s,o,a,c,d,l,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.provider&&null!==(t=this.chainConfig)&&void 0!==t&&t.chainId){e.next=2;break}throw p.RM.notConnectedError();case 2:if(r=this.chainConfig,n=r.chainNamespace,i=r.chainId,this.status===p.MP.CONNECTED){e.next=5;break}throw p.RM.notConnectedError("Not connected with wallet, Please login/connect first");case 5:return e.next=7,this.provider.request({method:"getAccounts"});case 7:if(!((s=e.sent)&&s.length>0)){e.next=27;break}if(!(o=(0,p.Cb)(s[0],this.name))){e.next=14;break}if((0,p.$E)(o)){e.next=14;break}return e.abrupt("return",{idToken:o});case 14:return a={domain:window.location.origin,uri:window.location.href,address:s[0],chainId:parseInt(i,16),version:"1",nonce:Math.random().toString(36).slice(2),issuedAt:(new Date).toISOString()},e.next=17,(0,p.tV)(a,n);case 17:return c=e.sent,d=(new TextEncoder).encode(c),e.next=21,this.provider.request({method:"signMessage",params:{message:d,display:"utf8"}});case 21:return l=e.sent,e.next=24,(0,p.rn)(n,g().encode(l),c,this.name,this.sessionTime,this.clientId);case 24:return u=e.sent,(0,p.Fr)(s[0],this.name,u),e.abrupt("return",{idToken:u});case 27:throw p.RM.notConnectedError("Not connected with wallet, Please login/connect first");case 28:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"disconnect",value:(t=(0,n.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.status===p.MP.CONNECTED){e.next=2;break}throw p.RM.disconnectionError("Not connected with wallet");case 2:return e.next=4,this.provider.request({method:"getAccounts"});case 4:(t=e.sent)&&t.length>0&&(0,p.qz)(t[0],this.name);case 6:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),w}(p.J5)},55777:e=>{"use strict";e.exports=function(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var n=0;n<e.length;n++){var i=e.charAt(n),s=i.charCodeAt(0);if(255!==t[s])throw new TypeError(i+" is ambiguous");t[s]=n}var o=e.length,a=e.charAt(0),c=Math.log(o)/Math.log(256),d=Math.log(256)/Math.log(o);function l(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;for(var r=0,n=0,i=0;e[r]===a;)n++,r++;for(var s=(e.length-r)*c+1>>>0,d=new Uint8Array(s);e[r];){var l=t[e.charCodeAt(r)];if(255===l)return;for(var u=0,h=s-1;(0!==l||u<i)&&-1!==h;h--,u++)l+=o*d[h]>>>0,d[h]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");i=u,r++}for(var p=s-i;p!==s&&0===d[p];)p++;for(var m=new Uint8Array(n+(s-p)),g=n;p!==s;)m[g++]=d[p++];return m}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,i=0,s=t.length;i!==s&&0===t[i];)i++,r++;for(var c=(s-i)*d+1>>>0,l=new Uint8Array(c);i!==s;){for(var u=t[i],h=0,p=c-1;(0!==u||h<n)&&-1!==p;p--,h++)u+=256*l[p]>>>0,l[p]=u%o>>>0,u=u/o>>>0;if(0!==u)throw new Error("Non-zero carry");n=h,i++}for(var m=c-n;m!==c&&0===l[m];)m++;for(var g=a.repeat(r);m<c;++m)g+=e.charAt(l[m]);return g},decodeUnsafe:l,decode:function(e){var t=l(e);if(t)return t;throw new Error("Non-base"+o+" character")}}}},37202:(e,t,r)=>{const n=r(55777);e.exports=n("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")},64111:(e,t,r)=>{"use strict";r.r(t),r.d(t,{SolanaWalletAdapter:()=>me});var n=r(15861),i=r(15671),s=r(43144),o=r(97326),a=r(11752),c=r(79340),d=r(82963),l=r(61120),u=r(4942),h=r(64687),p=r.n(h),m=r(24934),g=r(22782),f=r(20917),w=r(95844),y=r(84101),v=r(24970),b=r(74286),_=r.n(b),E=r(2043),C=r.n(E),I=r(64063),P=r.n(I),O=r(48764).Buffer,S=()=>"Torus: Lost connection to Torus.",A=()=>"Torus: Disconnected from iframe. Page reload required.",T=()=>"Must provide a Node.js-style duplex stream.",R=()=>"Expected a single, non-array, object argument.",k=()=>"'args.method' must be a non-empty string.",N=()=>"'args.params' must be an object or array if provided.",x=e=>'Torus: Connected to chain with ID "'.concat(e,'".');const j={PRODUCTION:"production",DEVELOPMENT:"development",TESTING:"testing"},L={BOTTOM_LEFT:"bottom-left",TOP_LEFT:"top-left",BOTTOM_RIGHT:"bottom-right",TOP_RIGHT:"top-right"};var Z={supportedVerifierList:["google","reddit","discord"],api:"https://api.tor.us",translations:{en:{embed:{continue:"Continue",actionRequired:"Authorization required",pendingAction:"Click continue to proceed with your request in a popup",cookiesRequired:"Cookies Required",enableCookies:"Please enable cookies in your browser preferences to access Torus",clickHere:"More Info"}},de:{embed:{continue:"Fortsetzen",actionRequired:"Autorisierung erforderlich",pendingAction:"Klicken Sie in einem Popup auf Weiter, um mit Ihrer Anfrage fortzufahren",cookiesRequired:"Cookies benötigt",enableCookies:"Bitte aktivieren Sie Cookies in Ihren Browsereinstellungen, um auf Torus zuzugreifen",clickHere:"Mehr Info"}},ja:{embed:{continue:"継続する",actionRequired:"認証が必要です",pendingAction:"続行をクリックして、ポップアップでリクエストを続行します",cookiesRequired:"必要なクッキー",enableCookies:"Torusにアクセスするには、ブラウザの設定でCookieを有効にしてください。",clickHere:"詳しくは"}},ko:{embed:{continue:"계속하다",actionRequired:"승인 필요",pendingAction:"팝업에서 요청을 진행하려면 계속을 클릭하십시오.",cookiesRequired:"쿠키 필요",enableCookies:"브라우저 환경 설정에서 쿠키를 활성화하여 Torus에 액세스하십시오.",clickHere:"더 많은 정보"}},zh:{embed:{continue:"继续",actionRequired:"需要授权",pendingAction:"单击继续以在弹出窗口中继续您的请求",cookiesRequired:"必填Cookie",enableCookies:"请在您的浏览器首选项中启用cookie以访问Torus。",clickHere:"更多信息"}}},prodTorusUrl:"",localStorageKey:"torus-".concat(window.location.hostname)},U=C().getLogger("solana-embed");const D=()=>Math.random().toString(36).slice(2),q=async e=>{let t,r;switch(e){case"testing":t="https://solana-testing.tor.us",r="debug";break;case"development":t="http://localhost:8080",r="debug";break;default:t="https://solana.tor.us",r="error"}return{torusUrl:t,logLevel:r}},M={height:660,width:375},z={height:740,width:1315},W={height:700,width:1200},F={height:600,width:400};function K(e){let{width:t,height:r}=e;const n=void 0!==window.screenLeft?window.screenLeft:window.screenX,i=void 0!==window.screenTop?window.screenTop:window.screenY,s=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:window.screen.width,o=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:window.screen.height,a=Math.abs((s-t)/2/1+n),c=Math.abs((o-r)/2/1+i);return"titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=".concat(r/1,",width=").concat(t/1,",top=").concat(c,",left=").concat(a)}class H extends w.Ue{constructor(e,t){let{maxEventListeners:r=100,jsonRpcStreamName:n="provider"}=t;if(super(),(0,u.Z)(this,"isTorus",void 0),(0,u.Z)(this,"_rpcEngine",void 0),(0,u.Z)(this,"jsonRpcConnectionEvents",void 0),(0,u.Z)(this,"_state",void 0),!(0,v.duplex)(e))throw new Error(T());this.isTorus=!0,this.setMaxListeners(r),this._handleConnect=this._handleConnect.bind(this),this._handleDisconnect=this._handleDisconnect.bind(this),this._handleStreamDisconnect=this._handleStreamDisconnect.bind(this),this._rpcRequest=this._rpcRequest.bind(this),this._initializeState=this._initializeState.bind(this),this.request=this.request.bind(this),this.sendAsync=this.sendAsync.bind(this);const i=new w.O4;_()(e,i,e,this._handleStreamDisconnect.bind(this,"Torus")),i.ignoreStream("phishing");const s=(0,w.AP)();_()(s.stream,i.createStream(n),s.stream,this._handleStreamDisconnect.bind(this,"Torus RpcProvider"));const o=new w.eI;o.push((0,w.Rq)()),o.push(((e,t,r)=>{"string"==typeof e.method&&e.method||(t.error=y.Sy.rpc.invalidRequest({message:"The request 'method' must be a non-empty string.",data:e})),r((e=>{const{error:r}=t;return r?(U.error("Torus - RPC Error: ".concat(r.message),r),e()):e()}))})),o.push((0,g.yh)({origin:location.origin})),o.push(s.middleware),this._rpcEngine=o,this.jsonRpcConnectionEvents=s.events}async request(e){if(!e||"object"!=typeof e||Array.isArray(e))throw y.Sy.rpc.invalidRequest({message:R(),data:e});const{method:t,params:r}=e;if("string"!=typeof t||0===t.length)throw y.Sy.rpc.invalidRequest({message:k(),data:e});if(void 0!==r&&!Array.isArray(r)&&("object"!=typeof r||null===r))throw y.Sy.rpc.invalidRequest({message:N(),data:e});return new Promise(((e,n)=>{this._rpcRequest({method:t,params:r},(0,w.nE)(e,n))}))}send(e,t){this._rpcRequest(e,t)}sendAsync(e){return new Promise(((t,r)=>{this._rpcRequest(e,(0,w.nE)(t,r))}))}_handleStreamDisconnect(e,t){!function(e,t,r){let n='Torus: Lost connection to "'.concat(e,'".');null!=t&&t.stack&&(n+="\n".concat(t.stack)),U.warn(n),r&&r.listenerCount("error")>0&&r.emit("error",n)}(e,t,this),this._handleDisconnect(!1,t?t.message:void 0)}}async function B(){return new Promise((e=>{"loading"!==document.readyState?e():function(e,t,r){for(var n=arguments.length,i=new Array(n>3?n-3:0),s=3;s<n;s++)i[s-3]=arguments[s];const o=()=>{r(...i),e.removeEventListener(t,o)};e.addEventListener(t,o)}(document,"DOMContentLoaded",e)}))}const V=e=>{const t=window.document.createElement("template"),r=e.trim();return t.innerHTML=r,t.content.firstChild};class G extends w.Ue{constructor(e){let{url:t,target:r,features:n}=e;super(),(0,u.Z)(this,"url",void 0),(0,u.Z)(this,"target",void 0),(0,u.Z)(this,"features",void 0),(0,u.Z)(this,"window",void 0),(0,u.Z)(this,"windowTimer",void 0),(0,u.Z)(this,"iClosedWindow",void 0),this.url=t,this.target=r||"_blank",this.features=n||K(W),this.window=void 0,this.windowTimer=void 0,this.iClosedWindow=!1,this._setupTimer()}_setupTimer(){this.windowTimer=Number(setInterval((()=>{this.window&&this.window.closed&&(clearInterval(this.windowTimer),this.iClosedWindow||this.emit("close"),this.iClosedWindow=!1,this.window=void 0),void 0===this.window&&clearInterval(this.windowTimer)}),500))}open(){var e;return this.window=window.open(this.url.href,this.target,this.features),null!==(e=this.window)&&void 0!==e&&e.focus&&this.window.focus(),Promise.resolve()}close(){this.iClosedWindow=!0,this.window&&this.window.close()}redirect(e){e?window.location.replace(this.url.href):window.location.href=this.url.href}}function J(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}class Y extends H{constructor(e,t){let{maxEventListeners:r=100,jsonRpcStreamName:n="provider"}=t;super(e,{maxEventListeners:r,jsonRpcStreamName:n}),(0,u.Z)(this,"embedTranslations",void 0),(0,u.Z)(this,"torusUrl",void 0),(0,u.Z)(this,"dappStorageKey",void 0),(0,u.Z)(this,"windowRefs",void 0),(0,u.Z)(this,"tryWindowHandle",void 0),(0,u.Z)(this,"torusAlertContainer",void 0),(0,u.Z)(this,"torusIframe",void 0),this._state=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?J(Object(r),!0).forEach((function(t){(0,u.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):J(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},Y._defaultState),this.torusUrl="",this.dappStorageKey="";const i=Z.translations[(()=>{let e=window.navigator.language||"en-US";const t=e.split("-");return e=Object.prototype.hasOwnProperty.call(Z.translations,t[0])?t[0]:"en",e})()];this.embedTranslations=i.embed,this.windowRefs={},this.on("connect",(()=>{this._state.isConnected=!0})),this.jsonRpcConnectionEvents.on("notification",(e=>{const{method:t,params:r}=e;if(t===g.Nb.IFRAME_STATUS){const{isFullScreen:e,rid:t}=r;this._displayIframe({isFull:e,rid:t})}else if(t===g.Nb.CREATE_WINDOW){const{windowId:e,url:t}=r;this._createPopupBlockAlert(e,t)}else if(t===g.Nb.CLOSE_WINDOW)this._handleCloseWindow(r);else if(t===g.Nb.USER_LOGGED_IN){const{currentLoginProvider:e}=r;this._state.isLoggedIn=!0,this._state.currentLoginProvider=e}else t===g.Nb.USER_LOGGED_OUT&&(this._state.isLoggedIn=!1,this._state.currentLoginProvider=null,this._displayIframe())}))}get isLoggedIn(){return this._state.isLoggedIn}get isIFrameFullScreen(){return this._state.isIFrameFullScreen}isConnected(){return this._state.isConnected}async _initializeState(e){try{const{torusUrl:t,dappStorageKey:r,torusAlertContainer:n,torusIframe:i}=e;this.torusUrl=t,this.dappStorageKey=r,this.torusAlertContainer=n,this.torusIframe=i,this.torusIframe.addEventListener("load",(()=>{this._state.isIFrameFullScreen||this._displayIframe()}));const{currentLoginProvider:s,isLoggedIn:o}=await this.request({method:g.vU.GET_PROVIDER_STATE,params:[]});this._handleConnect(s,o)}catch(e){U.error("Torus: Failed to get initial state. Please report this bug.",e)}finally{U.info("initialized communication state"),this._state.initialized=!0,this.emit("_initialized")}}_handleWindow(e){let{url:t,target:r,features:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=new URL(t||"".concat(this.torusUrl,"/redirect?windowId=").concat(e));this.dappStorageKey&&(i.hash?i.hash+="&dappStorageKey=".concat(this.dappStorageKey):i.hash="#dappStorageKey=".concat(this.dappStorageKey));const s=new G({url:i,target:r,features:n});s.open(),s.window?(this.windowRefs[e]=s,this.request({method:g.vU.OPENED_WINDOW,params:{windowId:e}}),s.once("close",(()=>{delete this.windowRefs[e],this.request({method:g.vU.CLOSED_WINDOW,params:{windowId:e}})}))):this._createPopupBlockAlert(e,i.href)}_displayIframe(){let{isFull:e=!1,rid:t=""}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r={};if(e)r.display="block",r.width="100%",r.height="100%",r.top="0px",r.right="0px",r.left="0px",r.bottom="0px";else switch(r.display=this._state.torusWidgetVisibility?"block":"none",r.height="70px",r.width="70px",this._state.buttonPosition){case L.TOP_LEFT:r.top="0px",r.left="0px",r.right="auto",r.bottom="auto";break;case L.TOP_RIGHT:r.top="0px",r.right="0px",r.left="auto",r.bottom="auto";break;case L.BOTTOM_RIGHT:r.bottom="0px",r.right="0px",r.top="auto",r.left="auto";break;case L.BOTTOM_LEFT:default:r.bottom="0px",r.left="0px",r.top="auto",r.right="auto"}Object.assign(this.torusIframe.style,r),this._state.isIFrameFullScreen=e,this.request({method:g.vU.IFRAME_STATUS,params:{isIFrameFullScreen:e,rid:t}})}hideTorusButton(){this._state.torusWidgetVisibility=!1,this._displayIframe()}showTorusButton(){this._state.torusWidgetVisibility=!0,this._displayIframe()}_rpcRequest(e,t){const r=t,n=e;Array.isArray(n)||n.jsonrpc||(n.jsonrpc="2.0"),this.tryWindowHandle(n,r)}_handleConnect(e,t){this._state.isConnected||(this._state.isConnected=!0,this.emit("connect",{currentLoginProvider:e,isLoggedIn:t}),U.debug(x(e)))}_handleDisconnect(e,t){if(this._state.isConnected||!this._state.isPermanentlyDisconnected&&!e){let r;this._state.isConnected=!1,e?(r=new y.Cg(1013,t||S()),U.debug(r)):(r=new y.Cg(1011,t||A()),U.error(r),this._state.currentLoginProvider=null,this._state.isLoggedIn=!1,this._state.torusWidgetVisibility=!1,this._state.isIFrameFullScreen=!1,this._state.isPermanentlyDisconnected=!0),this.emit("disconnect",r)}}_handleCloseWindow(e){const{windowId:t}=e;this.windowRefs[t]&&(this.windowRefs[t].close(),delete this.windowRefs[t])}async _createPopupBlockAlert(e,t){const r=this.getLogoUrl(),n=V('<div id="torusAlert" class="torus-alert--v2">'+'<div id="torusAlert__logo"><img src="'.concat(r,'" /></div>')+"<div>"+'<h1 id="torusAlert__title">'.concat(this.embedTranslations.actionRequired,"</h1>")+'<p id="torusAlert__desc">'.concat(this.embedTranslations.pendingAction,"</p>")+"</div></div>"),i=V('<div><a id="torusAlert__btn">'.concat(this.embedTranslations.continue,"</a></div>")),s=V('<div id="torusAlert__btn-container"></div>');s.appendChild(i),n.appendChild(s),await B(),(()=>{this.torusAlertContainer.appendChild(n)})(),(()=>{i.addEventListener("click",(()=>{this._handleWindow(e,{url:t,target:"_blank",features:K(F)}),n.remove(),0===this.torusAlertContainer.children.length&&(this.torusAlertContainer.style.display="none")}))})(),this.torusAlertContainer.style.display="block"}getLogoUrl(){return"".concat(this.torusUrl,"/images/torus_icon-blue.svg")}}function X(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(0,u.Z)(Y,"_defaultState",{buttonPosition:"bottom-left",currentLoginProvider:null,isIFrameFullScreen:!1,hasEmittedConnection:!1,torusWidgetVisibility:!1,initialized:!1,isLoggedIn:!1,isPermanentlyDisconnected:!1,isConnected:!1});class Q extends H{constructor(e,t){let{maxEventListeners:r=100,jsonRpcStreamName:n="provider"}=t;super(e,{maxEventListeners:r,jsonRpcStreamName:n}),(0,u.Z)(this,"chainId",void 0),(0,u.Z)(this,"selectedAddress",void 0),(0,u.Z)(this,"tryWindowHandle",void 0),this._state=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?X(Object(r),!0).forEach((function(t){(0,u.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},Q._defaultState),this.selectedAddress=null,this.chainId=null,this._handleAccountsChanged=this._handleAccountsChanged.bind(this),this._handleChainChanged=this._handleChainChanged.bind(this),this._handleUnlockStateChanged=this._handleUnlockStateChanged.bind(this),this.on("connect",(()=>{this._state.isConnected=!0})),this.jsonRpcConnectionEvents.on("notification",(e=>{const{method:t,params:r}=e;t===g.zK.ACCOUNTS_CHANGED?this._handleAccountsChanged(r):t===g.zK.UNLOCK_STATE_CHANGED?this._handleUnlockStateChanged(r):t===g.zK.CHAIN_CHANGED&&this._handleChainChanged(r)}))}isConnected(){return this._state.isConnected}async _initializeState(){try{const{accounts:e,chainId:t,isUnlocked:r}=await this.request({method:g.GA.GET_PROVIDER_STATE,params:[]});this.emit("connect",{chainId:t}),this._handleChainChanged({chainId:t}),this._handleUnlockStateChanged({accounts:e,isUnlocked:r}),this._handleAccountsChanged(e)}catch(e){U.error("Torus: Failed to get initial state. Please report this bug.",e)}finally{U.info("initialized provider state"),this._state.initialized=!0,this.emit("_initialized")}}_rpcRequest(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=t;const i=e;if(!Array.isArray(i))if(i.jsonrpc||(i.jsonrpc="2.0"),"solana_accounts"===i.method||"solana_requestAccounts"===i.method)n=(e,n)=>{this._handleAccountsChanged(n.result||[],"solana_accounts"===i.method,r),t(e,n)};else if("wallet_getProviderState"===i.method)return void this._rpcEngine.handle(e,n);this.tryWindowHandle(i,n)}_handleConnect(e){this._state.isConnected||(this._state.isConnected=!0,this.emit("connect",{chainId:e}),U.debug(x(e)))}_handleDisconnect(e,t){if(this._state.isConnected||!this._state.isPermanentlyDisconnected&&!e){let r;this._state.isConnected=!1,e?(r=new y.Cg(1013,t||S()),U.debug(r)):(r=new y.Cg(1011,t||A()),U.error(r),this.chainId=null,this._state.accounts=null,this.selectedAddress=null,this._state.isUnlocked=!1,this._state.isPermanentlyDisconnected=!0),this.emit("disconnect",r)}}_handleAccountsChanged(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=e;Array.isArray(n)||(U.error("Torus: Received non-array accounts parameter. Please report this bug.",n),n=[]);for(const t of e)if("string"!=typeof t){U.error("Torus: Received non-string account. Please report this bug.",e),n=[];break}P()(this._state.accounts,n)||(t&&Array.isArray(this._state.accounts)&&this._state.accounts.length>0&&!r&&U.error('Torus: "solana_accounts" unexpectedly updated accounts. Please report this bug.',n),this._state.accounts=n,this.emit("accountsChanged",n)),this.selectedAddress!==n[0]&&(this.selectedAddress=n[0]||null)}_handleChainChanged(){let{chainId:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e?"loading"===e?this._handleDisconnect(!0):(this._handleConnect(e),e!==this.chainId&&(this.chainId=e,this._state.initialized&&this.emit("chainChanged",this.chainId))):U.error("Torus: Received invalid network parameters. Please report this bug.",{chainId:e})}_handleUnlockStateChanged(){let{accounts:e,isUnlocked:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"boolean"==typeof t?t!==this._state.isUnlocked&&(this._state.isUnlocked=t,this._handleAccountsChanged(e||[])):U.error("Torus: Received invalid isUnlocked parameter. Please report this bug.",{isUnlocked:t})}}function $(e){return new Promise(((t,r)=>{try{const r=document.createElement("img");r.onload=()=>t(!0),r.onerror=()=>t(!1),r.src=e}catch(e){r(e)}}))}(0,u.Z)(Q,"_defaultState",{accounts:null,isConnected:!1,isUnlocked:!1,initialized:!1,isPermanentlyDisconnected:!1,hasEmittedConnection:!1});const ee=e=>{const{document:t}=e,r=t.querySelector('head > meta[property="og:site_name"]');if(r)return r.content;const n=t.querySelector('head > meta[name="title"]');return n?n.content:t.title&&t.title.length>0?t.title:e.location.hostname};async function te(e){try{const{document:t}=e;let r=t.querySelector('head > link[rel="shortcut icon"]');return r&&await $(r.href)?r.href:(r=Array.from(t.querySelectorAll('head > link[rel="icon"]')).find((e=>Boolean(e.href))),r&&await $(r.href)?r.href:"")}catch(e){return""}}function re(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ne(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?re(Object(r),!0).forEach((function(t){(0,u.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):re(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const{version:ie}=r(27384),se=["send_transaction","sign_transaction","sign_all_transactions","sign_message","connect"],oe=[g.vU.SET_PROVIDER],ae=function(e){let t;try{t=window.localStorage;const e="__storage_test__";return t.setItem(e,e),t.removeItem(e),!0}catch(e){return e&&(22===e.code||1014===e.code||"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&t&&0!==t.length}}();!async function(){try{if("undefined"==typeof document)return;const e=document.createElement("link"),{torusUrl:t}=await q("production");e.href="".concat(t,"/frame"),e.crossOrigin="anonymous",e.type="text/html",e.rel="prefetch",e.relList&&e.relList.supports&&e.relList.supports("prefetch")&&document.head.appendChild(e)}catch(e){U.warn(e)}}();class ce{constructor(){let{modalZIndex:e=99999}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,u.Z)(this,"isInitialized",void 0),(0,u.Z)(this,"torusAlert",void 0),(0,u.Z)(this,"modalZIndex",void 0),(0,u.Z)(this,"alertZIndex",void 0),(0,u.Z)(this,"requestedLoginProvider",void 0),(0,u.Z)(this,"provider",void 0),(0,u.Z)(this,"communicationProvider",void 0),(0,u.Z)(this,"dappStorageKey",void 0),(0,u.Z)(this,"isTopupHidden",!1),(0,u.Z)(this,"torusAlertContainer",void 0),(0,u.Z)(this,"torusUrl",void 0),(0,u.Z)(this,"torusIframe",void 0),(0,u.Z)(this,"styleLink",void 0),this.torusUrl="",this.isInitialized=!1,this.requestedLoginProvider=null,this.modalZIndex=e,this.alertZIndex=e+1e3,this.dappStorageKey=""}get isLoggedIn(){return!!this.communicationProvider&&this.communicationProvider.isLoggedIn}async init(){let{buildEnv:e=j.PRODUCTION,enableLogging:t=!1,network:r,showTorusButton:n=!1,useLocalStorage:i=!1,buttonPosition:s=L.BOTTOM_LEFT,apiKey:o="torus-default",extraParams:a={},whiteLabel:c}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.isInitialized)throw new Error("Already initialized");(0,f.ut)(o);const{torusUrl:d,logLevel:l}=await q(e);U.enableAll(),U.info(d,"url loaded"),U.info("Solana Embed Version :".concat(ie)),this.torusUrl=d,U.setDefaultLevel(l),t?U.enableAll():U.disableAll();const u=this.handleDappStorageKey(i),h=new URL(d);h.pathname.endsWith("/")?h.pathname+="frame":h.pathname+="/frame";const p=new URLSearchParams;u&&p.append("dappStorageKey",u),p.append("origin",window.location.origin),h.hash=p.toString(),this.torusIframe=V('<iframe\n        id="torusIframe"\n        class="torusIframe"\n        src="'.concat(h.href,'"\n        style="display: none; position: fixed; top: 0; right: 0; width: 100%;\n        height: 100%; border: none; border-radius: 0; z-index: ').concat(this.modalZIndex.toString(),'"\n      ></iframe>')),this.torusAlertContainer=V('<div id="torusAlertContainer" style="display:none; z-index: '.concat(this.alertZIndex.toString(),'"></div>')),this.styleLink=V('<link href="'.concat(d,'/css/widget.css" rel="stylesheet" type="text/css">')),await B(),await(async()=>new Promise(((e,t)=>{try{window.document.head.appendChild(this.styleLink),window.document.body.appendChild(this.torusIframe),window.document.body.appendChild(this.torusAlertContainer),this.torusIframe.addEventListener("load",(async()=>{const t=await(async()=>({name:ee(window),icon:await te(window)}))();this.torusIframe.contentWindow.postMessage({buttonPosition:s,apiKey:o,network:r,dappMetadata:t,extraParams:a,whiteLabel:c},h.origin),await this._setupWeb3({torusUrl:d}),n&&this.showTorusButton(),null!=c&&c.topupHide?this.isTopupHidden=c.topupHide:this.hideTorusButton(),this.isInitialized=!0,window.torus=this,e()}))}catch(e){t(e)}})))()}async login(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.isInitialized)throw new Error("Call init() first");try{this.requestedLoginProvider=e.loginProvider||null,this.requestedLoginProvider||this.communicationProvider._displayIframe({isFull:!0});const t=await new Promise(((t,r)=>{this.provider._rpcRequest({method:"solana_requestAccounts",params:[this.requestedLoginProvider,e.login_hint]},(0,w.nE)(t,r))}));if(Array.isArray(t)&&t.length>0)return t;throw new Error("Login failed")}catch(e){throw U.error("login failed",e),e}finally{this.communicationProvider.isIFrameFullScreen&&this.communicationProvider._displayIframe()}}async loginWithPrivateKey(e){if(!this.isInitialized)throw new Error("Call init() first");const{privateKey:t,userInfo:r}=e,{success:n}=await this.communicationProvider.request({method:"login_with_private_key",params:{privateKey:t,userInfo:r}});if(!n)throw new Error("Login Failed")}async logout(){if(!this.communicationProvider.isLoggedIn)throw new Error("Not logged in");await this.communicationProvider.request({method:g.vU.LOGOUT,params:[]}),this.requestedLoginProvider=null}async cleanUp(){this.communicationProvider.isLoggedIn&&await this.logout(),this.clearInit()}clearInit(){function e(e){return e instanceof Element||e instanceof Document}e(this.styleLink)&&window.document.body.contains(this.styleLink)&&(this.styleLink.remove(),this.styleLink=void 0),e(this.torusIframe)&&window.document.body.contains(this.torusIframe)&&(this.torusIframe.remove(),this.torusIframe=void 0),e(this.torusAlertContainer)&&window.document.body.contains(this.torusAlertContainer)&&(this.torusAlert=void 0,this.torusAlertContainer.remove(),this.torusAlertContainer=void 0),this.isInitialized=!1}hideTorusButton(){this.communicationProvider.hideTorusButton()}showTorusButton(){this.communicationProvider.showTorusButton()}async setProvider(e){await this.communicationProvider.request({method:g.vU.SET_PROVIDER,params:ne({},e)})}async showWallet(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=await this.communicationProvider.request({method:g.vU.WALLET_INSTANCE_ID,params:[]}),n=e?"/".concat(e):"",i=new URL("".concat(this.torusUrl,"/wallet").concat(n));i.searchParams.append("instanceId",r),Object.keys(t).forEach((e=>{i.searchParams.append(e,t[e])})),this.dappStorageKey&&(i.hash="#dappStorageKey=".concat(this.dappStorageKey)),new G({url:i,features:K(z)}).open()}async getUserInfo(){return await this.communicationProvider.request({method:g.vU.USER_INFO,params:[]})}async initiateTopup(e,t){if(!this.isInitialized)throw new Error("Torus is not initialized");const r=D();return this.communicationProvider._handleWindow(r),await this.communicationProvider.request({method:g.vU.TOPUP,params:{provider:e,params:t,windowId:r}})}async getAccounts(){return await this.provider.request({method:"getAccounts",params:[]})}async sendTransaction(e){return await this.provider.request({method:"send_transaction",params:{message:e.serialize({requireAllSignatures:!1}).toString("hex")}})}async signAndSendTransaction(e,t){return{signature:await this.provider.request({method:"send_transaction",params:{message:e.serialize({requireAllSignatures:!1}).toString("hex"),options:t}})}}async signTransaction(e){const t=await this.provider.request({method:"sign_transaction",params:{message:e.serializeMessage().toString("hex"),messageOnly:!0}}),r=JSON.parse(t),n={publicKey:new m.nh(r.publicKey),signature:O.from(r.signature,"hex")};return e.addSignature(n.publicKey,n.signature),e}async signAllTransactions(e){const t=e.map((e=>e.serializeMessage().toString("hex"))),r=(await this.provider.request({method:"sign_all_transactions",params:{message:t,messageOnly:!0}})).map((e=>{const t=JSON.parse(e);return{publicKey:new m.nh(t.publicKey),signature:O.from(t.signature,"hex")}}));return e.forEach(((e,t)=>(e.addSignature(r[t].publicKey,r[t].signature),e))),e}async signMessage(e){return await this.provider.request({method:"sign_message",params:{data:e}})}async getGaslessPublicKey(){return await this.provider.request({method:"get_gasless_public_key",params:[]})}handleDappStorageKey(e){let t="";if(ae&&e){const e=window.localStorage.getItem(Z.localStorageKey);if(e)t=e;else{const e="torus-app-".concat(D());window.localStorage.setItem(Z.localStorageKey,e),t=e}}return this.dappStorageKey=t,t}async _setupWeb3(e){U.info("setupWeb3 running");const t=new w.XR({name:"embed_torus",target:"iframe_torus",targetWindow:this.torusIframe.contentWindow}),r=new w.XR({name:"embed_communication",target:"iframe_communication",targetWindow:this.torusIframe.contentWindow}),n=new Q(t,{}),i=new Y(r,{});n.tryWindowHandle=(e,t)=>{const r=e;if(!Array.isArray(r)&&se.includes(r.method)){if(!this.communicationProvider.isLoggedIn)throw new Error("User Not Logged In");const e=D();i._handleWindow(e,{target:"_blank",features:K(F)}),r.windowId=e}n._rpcEngine.handle(r,t)},i.tryWindowHandle=(e,t)=>{const r=e;if(!Array.isArray(r)&&oe.includes(r.method)){const e=D();i._handleWindow(e,{target:"_blank",features:K(M)}),r.params.windowId=e}i._rpcEngine.handle(r,t)};const s=e=>{const t=n[e],r=this;n[e]=function(e,n){const{method:i,params:s=[]}=e;if("solana_requestAccounts"===i){if(!n)return r.login({loginProvider:s[0]});r.login({loginProvider:s[0]}).then((e=>n(null,e))).catch((e=>n(e)))}return t.apply(this,[e,n])}};s("request"),s("sendAsync"),s("send");const o=new Proxy(n,{deleteProperty:()=>!0}),a=new Proxy(i,{deleteProperty:()=>!0});this.provider=o,this.communicationProvider=a,await Promise.all([n._initializeState(),i._initializeState(ne(ne({},e),{},{dappStorageKey:this.dappStorageKey,torusAlertContainer:this.torusAlertContainer,torusIframe:this.torusIframe}))]),U.debug("Torus - injected provider")}}var de=r(8654),le=r(1482),ue=r(44445);function he(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function pe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?he(Object(r),!0).forEach((function(t){(0,u.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):he(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var me=function(e){(0,c.Z)(y,e);var t,r,h,m,g,f,w=(g=y,f=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,l.Z)(g);if(f){var r=(0,l.Z)(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return(0,d.Z)(this,e)});function y(e){var t;return(0,i.Z)(this,y),t=w.call(this,e),(0,u.Z)((0,o.Z)(t),"name",de.rW.TORUS_SOLANA),(0,u.Z)((0,o.Z)(t),"adapterNamespace",de.yk.SOLANA),(0,u.Z)((0,o.Z)(t),"currentChainNamespace",de.EN.SOLANA),(0,u.Z)((0,o.Z)(t),"type",de.hN.EXTERNAL),(0,u.Z)((0,o.Z)(t),"status",de.MP.NOT_READY),(0,u.Z)((0,o.Z)(t),"torusInstance",null),(0,u.Z)((0,o.Z)(t),"torusWalletOptions",void 0),(0,u.Z)((0,o.Z)(t),"initParams",void 0),(0,u.Z)((0,o.Z)(t),"loginSettings",{}),(0,u.Z)((0,o.Z)(t),"solanaProvider",null),(0,u.Z)((0,o.Z)(t),"rehydrated",!1),t.torusWalletOptions=e.adapterSettings||{},t.initParams=e.initParams||{},t.loginSettings=e.loginSettings||{},t.chainConfig=e.chainConfig||null,t.sessionTime=e.sessionTime||86400,t}return(0,s.Z)(y,[{key:"provider",get:function(){var e;return this.status===de.MP.CONNECTED&&this.solanaProvider&&(null===(e=this.solanaProvider)||void 0===e?void 0:e.provider)||null},set:function(e){throw new Error("Not implemented")}},{key:"init",value:(m=(0,n.Z)(p().mark((function e(t){var r,n,i,s,o,c,d,u,h,m,g,f,w,v,b;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,a.Z)((0,l.Z)(y.prototype),"checkInitializationRequirements",this).call(this),this.chainConfig?(h=this.chainConfig,m=h.chainId,g=h.blockExplorer,f=h.displayName,w=h.rpcTarget,v=h.ticker,b=h.tickerName,r={chainId:m,rpcTarget:w,blockExplorerUrl:g,displayName:f,tickerName:b,ticker:v,logo:""}):(this.chainConfig=(0,de.h2)(de.EN.SOLANA,"0x1"),n=this.chainConfig,i=n.blockExplorer,s=n.displayName,o=n.ticker,c=n.tickerName,d=n.rpcTarget,u=n.chainId,r={chainId:u,rpcTarget:d,blockExplorerUrl:i,displayName:s,ticker:o,tickerName:c,logo:""}),this.torusInstance=new ce(this.torusWalletOptions),de.cM.debug("initializing torus solana adapter init"),e.next=6,this.torusInstance.init(pe(pe({showTorusButton:!1},this.initParams),{},{network:r}));case 6:if(this.solanaProvider=new ue.TorusInjectedProvider({config:{chainConfig:this.chainConfig}}),this.status=de.MP.READY,this.emit(de.n2.READY,de.rW.TORUS_SOLANA),e.prev=9,de.cM.debug("initializing torus solana adapter"),!t.autoConnect){e.next=15;break}return this.rehydrated=!0,e.next=15,this.connect();case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(9),de.cM.error("Failed to connect with cached torus solana provider",e.t0),this.emit(de.n2.ERRORED,e.t0);case 21:case"end":return e.stop()}}),e,this,[[9,17]])}))),function(e){return m.apply(this,arguments)})},{key:"connect",value:(h=(0,n.Z)(p().mark((function e(){var t,r,n,i,s,o,c,d,u;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,a.Z)((0,l.Z)(y.prototype),"checkConnectionRequirements",this).call(this),this.torusInstance){e.next=3;break}throw de.Ty.notReady("Torus wallet is not initialized");case 3:if(this.solanaProvider){e.next=5;break}throw de.Ty.notReady("Torus wallet is not initialized");case 5:return this.status=de.MP.CONNECTING,this.emit(de.n2.CONNECTING,{adapter:de.rW.TORUS_SOLANA}),e.prev=7,e.next=10,this.torusInstance.login(this.loginSettings);case 10:return e.prev=10,(t=this.torusInstance.provider).sendTransaction=this.torusInstance.sendTransaction.bind(this.torusInstance),t.signAllTransactions=this.torusInstance.signAllTransactions.bind(this.torusInstance),t.signMessage=this.torusInstance.signMessage.bind(this.torusInstance),t.signTransaction=this.torusInstance.signTransaction.bind(this.torusInstance),e.next=18,this.solanaProvider.setupProvider(t);case 18:case 27:e.next=30;break;case 20:if(e.prev=20,e.t0=e.catch(10),!(e.t0 instanceof de.up&&5010===e.t0.code)){e.next=29;break}return r=this.chainConfig,n=r.chainId,i=r.blockExplorer,s=r.displayName,o=r.rpcTarget,c=r.ticker,d=r.tickerName,u={chainId:n,rpcTarget:o,blockExplorerUrl:i,displayName:s,tickerName:d,ticker:c,logo:""},e.next=27,this.torusInstance.setProvider(u);case 29:throw e.t0;case 30:return this.status=de.MP.CONNECTED,this.torusInstance.showTorusButton(),this.emit(de.MP.CONNECTED,{adapter:de.rW.TORUS_SOLANA,reconnected:this.rehydrated}),e.abrupt("return",this.provider);case 36:throw e.prev=36,e.t1=e.catch(7),this.status=de.MP.READY,this.rehydrated=!1,this.emit(de.n2.ERRORED,e.t1),de.RM.connectionError("Failed to login with torus solana wallet");case 42:case"end":return e.stop()}}),e,this,[[7,36],[10,20]])}))),function(){return h.apply(this,arguments)})},{key:"disconnect",value:(r=(0,n.Z)(p().mark((function e(){var t,r=arguments;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.length>0&&void 0!==r[0]?r[0]:{cleanup:!1},this.torusInstance){e.next=3;break}throw de.Ty.notReady("Torus wallet is not initialized");case 3:return e.next=5,(0,a.Z)((0,l.Z)(y.prototype),"disconnect",this).call(this);case 5:return e.next=7,this.torusInstance.logout();case 7:t.cleanup?(this.status=de.MP.NOT_READY,this.torusInstance=null,this.solanaProvider=null):this.status=de.MP.READY,this.emit(de.n2.DISCONNECTED);case 9:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"getUserInfo",value:(t=(0,n.Z)(p().mark((function e(){var t;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.status===de.MP.CONNECTED){e.next=2;break}throw de.RM.notConnectedError("Not connected with wallet");case 2:if(this.torusInstance){e.next=4;break}throw de.Ty.notReady("Torus wallet is not initialized");case 4:return e.next=6,this.torusInstance.getUserInfo();case 6:return t=e.sent,e.abrupt("return",t);case 8:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"setAdapterSettings",value:function(e){this.status!==de.MP.READY&&(null!=e&&e.sessionTime&&(this.sessionTime=e.sessionTime),null!=e&&e.clientId&&(this.clientId=e.clientId))}}]),y}(le.v)},27384:e=>{"use strict";e.exports=JSON.parse('{"name":"@toruslabs/solana-embed","version":"0.3.0","description":"Embed script for solana blockchain","main":"dist/solanaEmbed.cjs.js","module":"dist/solanaEmbed.esm.js","unpkg":"dist/solanaEmbed.umd.min.js","jsdelivr":"dist/solanaEmbed.umd.min.js","types":"dist/types/index.d.ts","files":["dist","src"],"scripts":{"start":"torus-scripts start","build":"torus-scripts build","build:test":"cross-env NODE_ENV=testing torus-scripts build","release":"torus-scripts release","prepack":"npm run build","lint:ts":"eslint --fix \'src/**/*.ts\'","prepare":"husky install"},"repository":{"type":"git","url":"git+https://github.com/torusresearch/solana-embed.git"},"dependencies":{"@solana/web3.js":"^1.36.0","@toruslabs/base-controllers":"^2.2.3","@toruslabs/http-helpers":"^3.0.0","@toruslabs/openlogin-jrpc":"^2.0.0","eth-rpc-errors":"^4.0.3","fast-deep-equal":"^3.1.3","is-stream":"^2.0.1","lodash-es":"^4.17.21","loglevel":"^1.8.0","pump":"^3.0.0"},"peerDependencies":{"@babel/runtime":"7.x"},"devDependencies":{"@babel/register":"^7.17.7","@babel/runtime":"^7.18.9","@commitlint/cli":"^16.2.4","@commitlint/config-conventional":"^16.2.4","@commitlint/is-ignored":"^16.2.4","@toruslabs/eslint-config-typescript":"^1.0.6","@toruslabs/torus-scripts":"^1.0.9","@types/bs58":"^4.0.1","@types/node":"^17.0.45","@types/once":"^1.4.0","@types/pump":"^1.1.1","@types/readable-stream":"^2.3.14","@typescript-eslint/eslint-plugin":"^5.25.0","@typescript-eslint/parser":"^5.25.0","cross-env":"^7.0.3","eslint":"^8.15.0","eslint-plugin-import":"^2.26.0","eslint-plugin-mocha":"^10.0.5","eslint-plugin-n":"^15.2.4","eslint-plugin-prettier":"^4.0.0","eslint-plugin-promise":"^6.0.0","eslint-plugin-simple-import-sort":"^7.0.0","eslint-plugin-tsdoc":"^0.2.16","husky":"^8.0.1","lint-staged":"^12.4.3","mocha":"^10.0.0","prettier":"^2.6.2","puppeteer":"^14.1.2","rimraf":"^3.0.2","ts-node":"^10.7.0","typescript":"^4.6.4"},"mocha":{"timeout":0},"keywords":["torus","wallet","Solana","embed","login","OAuth","crypto"],"author":"Torus Labs","license":"ISC","bugs":{"url":"https://github.com/torusresearch/solana-embed/issues"},"homepage":"https://github.com/torusresearch/solana-embed#readme","lint-staged":{"!(*d).{js,ts}":["eslint --cache --fix","prettier --write"],"*.{json, md}":["prettier --write"]},"engines":{"node":">=14.17.0","npm":">=6.x"}}')}}]);